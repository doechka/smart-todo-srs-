# Процесс нормализации базы данных "Умные карточки"

## Анализ предметной области

Приложение "Умные карточки" предназначено для эффективного запоминания информации с использованием интервального повторения. Основные бизнес-процессы:

- Создание и управление колодами карточек
- Добавление карточек с вопросами и ответами
- Проведение сессий обучения
- Оценка сложности карточек
- Расчет интервалов повторения

## Нормализация до 1NF

### Исходная денормализованная структура (проблемный вариант):
Cards(card_id, question, answer, deck_id, deck_name, user_id, username, tags, media_files, review_history)

### Проблемы:
- Множественные значения в tags и media_files
- Повторение данных пользователя в каждой карточке
- Сложность обновления информации о колоде

### Решения для 1NF:
- Все атрибуты сделаны атомарными
- Множественные значения вынесены в отдельные таблицы (Tags, MediaFiles)
- Созданы отдельные таблицы для связанных сущностей

## Нормализация до 2NF

### Выявленные частичные зависимости:
- deck_name зависела от deck_id, а не от card_id
- username зависел от user_id, а не от card_id

### Решения для 2NF:
- Создана таблица Decks с информацией о колодах
- Создана таблица Users с информацией о пользователях
- В Cards остались только ссылки (FK) на связанные сущности

## Нормализация до 3NF

### Выявленные транзитивные зависимости:
- В первоначальной структуре были зависимости между неключевыми атрибутами

### Решения для 3NF:
- Каждая таблица содержит только атрибуты, зависящие от первичного ключа
- Созданы таблицы для многих-ко-многим связей (CardTags)
- Вынесены специализированные сущности (CardReviews для алгоритма интервального повторения)

## Финальная нормализованная схема (3NF)

### Таблицы:
1. **Users** - данные пользователей
2. **Decks** - колоды карточек  
3. **Cards** - карточки (вопрос+ответ)
4. **StudySessions** - сессии обучения
5. **CardReviews** - история оценок (интервальное повторение)
6. **MediaFiles** - медиа-файлы карточек
7. **Tags** - теги для категоризации
8. **CardTags** - связь карточек и тегов

### Преимущества нормализованной схемы:
- Устранена избыточность данных
- Предотвращены аномалии обновления/удаления
- Упрощено поддержание целостности данных
- Гибкость для будущих расширений

## Компромиссы и проектные решения

### Сознательные отступления от строгой нормализации:
- В CardReviews хранится calculated next_review_date для производительности
- В StudySessions хранится агрегированная статистика

### Индексы для оптимизации:
- Индексы на всех внешних ключах
- Индекс на next_review_date для быстрого поиска карточек к повторению
- Индексы на часто используемых полях фильтрации
# [ER-диаграмма](https://github.com/doechka/smart-todo-srs-/blob/main/docs/database/ER-диаграммма.drawio.svg)
# [Схема нормализации](.github/database/schema.sql)
